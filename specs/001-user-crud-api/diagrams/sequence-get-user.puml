@startuml
skinparam sequenceMessageAlign center

actor "API Client" as client
participant "UserController" as controller
participant "UserRepository" as repo
database "PostgreSQL" as db

client -> controller : GET /users/{id}
activate controller

controller -> repo : findById(id)
activate repo
repo -> db : SELECT * FROM users\nWHERE id = ?
activate db
db --> repo : row or empty
deactivate db
repo --> controller : Optional<User>
deactivate repo

alt user not found
  controller --> client : 404 Not Found\n{error details}
else user found
  controller --> client : 200 OK\n{id, name, email}
end

deactivate controller

@enduml
